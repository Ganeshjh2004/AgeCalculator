<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Calculator</title>
    <link rel="icon" type="calculator/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="calculator">
            <h1>Age Calculator</h1>
            <div class="input-box">
                <input type="date" id="date">
                <button onClick="calculateAge()">Calculate Age</button>
            </div>
            <div id="result" role="status" aria-live="polite">
                <p class="message" aria-atomic="true"></p>
                <div class="result-actions">
                    <span class="days"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let userInput = document.getElementById("date");
        userInput.max = new Date().toISOString().split("T")[0];
    let result= document.getElementById("result");
    let message = result.querySelector('.message');
    let daysEl = result.querySelector('.days');

function calculateAge() {
    // validation: ensure a date was selected
    if(!userInput.value){
        showError('Please select your birth date.');
        return;
    }

    let birthDate = new Date(userInput.value);
    let today = new Date();
    // if birthDate is in the future
    if(birthDate > today){
        showError('The selected date is in the future. Please choose a valid birth date.');
        return;
    }

    let d1 = birthDate.getDate();
    let m1 = birthDate.getMonth() + 1;
    let y1 = birthDate.getFullYear();

    let d2 = today.getDate();
    let m2 = today.getMonth() + 1;
    let y2 = today.getFullYear();

    let d3,m3,y3;

    y3=y2-y1;
    if(m2>=m1){
        m3=m2-m1;
    }else{
        y3--;
        m3=12 + m2-m1;
    }
    if(d2>=d1){
        d3=d2-d1;
    }else{
        m3--;
        d3=getDaysInMonth(y1,m1)+ d2-d1;
    }
    if(m3<0){
        m3=11;
        y3--;
    }
    // compute total days difference (rounded down)
    const msPerDay = 24*60*60*1000;
    const totalDays = Math.floor((today - birthDate) / msPerDay);

    // prepare message and actions
    message.classList.remove('error');
    message.innerHTML = `You are <span class="chip">${y3}</span> years <span class="chip">${m3}</span> months and <span class="chip">${d3}</span> days old`;
    daysEl.textContent = `Total days: ${totalDays.toLocaleString()}`;

    // (copy-to-clipboard removed) result message and days are ready

    // animate in
    result.classList.remove('visible');
    setTimeout(()=> result.classList.add('visible'), 20);
}

function showError(msg){
    // show error message and hide actions
    message.classList.add('error');
    message.textContent = msg;
    daysEl.textContent = '';
    result.classList.remove('visible');
    setTimeout(()=> result.classList.add('visible'), 20);
}
function getDaysInMonth(year, month) {
    return new Date(year, month, 0).getDate();
}

    </script>
</body>
</html>